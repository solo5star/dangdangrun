<div align="center">
    <img width="240" src="assets/icon.png">
    <h1>당당런</h1>
    <h3>당당치킨 입고 알리미</h3>
    <br>

[![](https://dcbadge.vercel.app/api/server/fnRCTTRbVs)](https://discord.gg/fnRCTTRbVs)

</div>

<br><br>

## 소개

|![](assets/당당런%20재고현황.png)|![](assets/당당런%20입고알림.png)|
|:-:|:-:|

온라인 당당치킨 재고를 실시간에 가깝게 감지하여 디스코드 봇으로 알려주는 프로그램입니다. 상단의 디스코드 뱃지를 클릭하여 참가하세요!

<br><br>

## 목차
- [소개](#소개)
- [목차](#목차)
- [당당치킨 배달(마트직송) 가이드](#당당치킨-배달마트직송-가이드)
  - [당당치킨, 온라인으로 배송할 수 있는지 확인하기](#당당치킨-온라인으로-배송할-수-있는지-확인하기)
  - [당당치킨이 입고되는 시간](#당당치킨이-입고되는-시간)
  - [꼭 챙기세요! 혜택 꿀팁](#꼭-챙기세요-혜택-꿀팁)
    - [첫구매 쿠폰](#첫구매-쿠폰)
    - [4만원 이상 배송비 무료](#4만원-이상-배송비-무료)
    - [다음 달엔 2만원 이상 무료배송](#다음-달엔-2만원-이상-무료배송)
  - [당당치킨 주문](#당당치킨-주문)
    - [배송 날짜/시간 선택](#배송-날짜시간-선택)
    - [쿠폰 적용 및 결제](#쿠폰-적용-및-결제)
- [당당치킨 맛있게 먹기](#당당치킨-맛있게-먹기)
  - [튀김을 다시 살리기](#튀김을-다시-살리기)
  - [에어프라이어로 데우기](#에어프라이어로-데우기)
  - [오븐으로 데우기 (후라이드)](#오븐으로-데우기-후라이드)
  - [오븐으로 데우기 (양념)](#오븐으로-데우기-양념)
  - [홈플러스 PB 탄산과 같이 먹기](#홈플러스-pb-탄산과-같이-먹기)
  - [소스, 치킨무와 같이 먹기](#소스-치킨무와-같이-먹기)
  - [페리카나 양념소스와 먹기](#페리카나-양념소스와-먹기)
  - [파채와 먹기](#파채와-먹기)
- [직접 호스팅하기](#직접-호스팅하기)
  - [레포지토리 클론](#레포지토리-클론)
  - [환경변수 설정](#환경변수-설정)
  - [실행](#실행)
    - [`docker` 를 사용하여 실행하기 (권장)](#docker-를-사용하여-실행하기-권장)
    - [`python` 명령을 사용하여 실행하기](#python-명령을-사용하여-실행하기)
- [빌드](#빌드)
- [환경변수](#환경변수)
  - [`DEBUG` (server, bot)](#debug-server-bot)
  - [`REGIONS` (server)](#regions-server)
  - [`SERVER_HOST` (bot)](#server_host-bot)
  - [`DISCORD_TOKEN` (bot)](#discord_token-bot)
  - [`DISCORD_DEBUG_SERVER_ID` (bot)](#discord_debug_server_id-bot)

<br><br>

## 당당치킨 배달(마트직송) 가이드

### 당당치킨, 온라인으로 배송할 수 있는지 확인하기

홈플러스에서는 두 가지 온라인 배달 서비스를 운영하고 있습니다. 1) **마트직송** 은 정해진 시간에 배송해주는 서비스입니다. 2) **즉시배송** 은 주문 즉시 배송되는 서비스입니다.

|![홈플러스 배송 예시](assets/홈플러스%20배송%20예시.png)|
|:-:|
|마트직송 예시|

당당치킨은 **마트직송** 만 지원합니다.

따라서 배송받을 곳(집, 학교 등)에서 **마트직송**이 가능한지 확인이 필요합니다. **[홈플러스](https://front.homeplus.co.kr)** 에 회원가입(또는 로그인)하여 확인할 수 있습니다. (네이버, 카카오 로그인 지원)

|![홈플러스 배송지](assets/홈플러스%20배송지.png)|
|:-:|
|홈플러스 배송지 관리|

PC에서는 오른쪽 바를 열어 배송지를 추가할 수 있습니다. 모바일 앱이라면 마이페이지 > My 회원정보 > 배송 정보 관리 > 배송지 추가 를 통해 배송지를 추가해주세요.

주변 홈플러스 지점이 표시되지 않는다면 마트직송이 불가능합니다...

<br><br>

### 당당치킨이 입고되는 시간

|![홈플러스 당당치킨 입고](assets/홈플러스%20당당치킨%20입고.png)|
|:-:|
|홈플러스 당당치킨 입고 알림 예시|

당당치킨 재고는 **오전 8시 근처에 입고**됩니다. 정확히 8시가 아닌 7시 50분이 될 수도 있고, 8시 5분이 될 수도 있습니다. (8시 기준으로 약 10분 전후) 따라서 오전 7시 40~50분쯤 부터 기다리는 것이 좋습니다.

> 당당치킨은 빠르게 소진됩니다. (지점별 차이 有) 혹시 홈플러스에서 살 물품이 있다면 미리 장바구니에 담아두세요.

<br><br>

### 꼭 챙기세요! 혜택 꿀팁

#### 첫구매 쿠폰

**[여기](https://front.homeplus.co.kr/promotion/2022/08/newmember)** 를 클릭하여 첫구매 쿠폰 발급 페이지로 이동할 수 있습니다.

|![홈플러스 첫구매 쿠폰](assets/홈플러스%20첫구매%20쿠폰.png)|
|:-:|
|홈플러스 첫구매 쿠폰(50% 최대 5천원)|

홈플러스에서 온라인으로 처음 구매하는 분이라면 첫구매 쿠폰을 사용할 수 있습니다. 50% 최대 5천원 할인이 가능하니 꼭 챙기세요!

아래는 첫구매 할인을 받았을 때 최종금액 표입니다.

|당당치킨 구성|배송비|첫구매 할인|최종 금액|비고|
|-|-|-|-|-|
|후라이드(6,990)|3,000|-3,495|**6,495**|1)|
|양념(7,990)|3,000|-3,995|**6,995**|1)|
|후라이드(6,990) + 양념(7,990)|3,000|-5,000|**12,980**||
|후라이드(6,990) + 후라이드(6,990) + 양념(7,990)|3,000|-5,000|**19,970**||
|후라이드(6,990) + 양념(7,990) + 양념(7,990)|3,000|-5,000|**20,970**||

> 1) 첫구매 할인에 배송비까지 포함되는건지는 모르겠습니다...

<br><br>

#### 4만원 이상 배송비 무료

홈플러스는 마트직송 배송비가 3천원입니다. 다른 물품까지 4만원 이상 주문하신다면 배송비가 면제됩니다.

<br><br>

#### 다음 달엔 2만원 이상 무료배송

이번 달에 한번이라도 구매한 적이 있다면 다음 달에 2만원이상 무료배송 쿠폰을 2장 받을 수 있습니다. 당당치킨 3마리 구매 시 무료배송이 가능한 금액입니다.

|![홈플러스 등급별 헤택](assets/홈플러스%20등급별%20혜택.png)|
|:-:|
|홈플러스 등급별 혜택|

<br><br>

### 당당치킨 주문

오전 7시 40~50분까지 대기하다가 재고가 나타나자마자 바로 당당치킨을 장바구니에 담고 주문하세요.

<br><br>

#### 배송 날짜/시간 선택

|![홈플러스 마트직송 날짜시간 선택](assets/홈플러스%20마트직송%20날짜시간%20선택.jpg)|
|:-:|
|홈플러스 마트직송 날짜/시간 선택|

당당치킨을 받을 수 있는 시간을 선택할 수 있습니다. 당당치킨은 14시 이후에만 배송이 가능하니 참고해주세요.

<br><br>

#### 쿠폰 적용 및 결제

|![홈플러스 결제 페이지](assets/홈플러스%20결제%20페이지.jpg)|
|:-:|
|홈플러스 결제|

이제 마지막 단계입니다. 공동현관 출입방법은 주문 후 수정할 수 있습니다. 중요한 것은 **쿠폰 적용**입니다. 첫구매 쿠폰 대상자라면 꼭 적용하세요.

<br><br>

## 당당치킨 맛있게 먹기

|![홈플러스 배송완료 문자](assets/홈플러스%20배송완료%20문자.jpg)|
|:-:|
|홈플러스 배송완료 문자 안내|

배송이 완료되면 배송 담당자가 문자로 알림을 보내주거나 카톡으로 배송 완료 안내 메세지가 옵니다.

<br><br>

### 튀김을 다시 살리기

|![홈플러스 당당치킨 박스](assets/홈플러스%20당당치킨%20박스.jpg)|
|:-:|
|당당치킨 박스|

배송이 온 시점에 튀김은 식었을 겁니다. 그대로 먹어도 나쁘진 않으나 에어프라이어, 오븐을 사용하여 데우면 바삭한 튀김이 되살아나 200% 맛있게 먹을 수 있습니다.

<br><br>

### 에어프라이어로 데우기

홈플러스 공식 홈페이지에서는 후라이드, 양념 모두 **180도에서 5분** 데우는 것으로 권장하고 있습니다.

> 에어프라이어가 없어 테스트해보지 못하였습니다.

<br><br>

### 오븐으로 데우기 (후라이드)

먼저, 오븐을 예열해야 합니다. 오븐을 **최고 온도로 맞춘 뒤 5 ~ 10분 예열**해주세요.

|![](assets/홈플러스%20당당치킨%20후라이드%20오븐조리%20(1).jpg)|
|:-:|
|당당치킨 플레이팅|

예열하는 동안 당당치킨을 플레이팅해줍니다. 오븐 트레이에 키친타올을 깔고 위에 종이호일을 올려주세요. 그리고 트레이에 치킨을 빈 공간 없이 올려주면 됩니다.

|![](assets/홈플러스%20당당치킨%20후라이드%20오븐조리%20(2).jpg)|
|:-:|
|당당치킨 오븐조리 (1)|

|![](assets/홈플러스%20당당치킨%20후라이드%20오븐조리%20(3).jpg)|
|:-:|
|당당치킨 오븐조리 (2)|

당당치킨을 오븐에 넣어줍니다. 화상을 입지 않도록 주의해주세요.

**200도에서 12분** 동안 조리하면 됩니다.

|![](assets/홈플러스%20당당치킨%20후라이드%20오븐조리%20(4).jpg)|![](assets/홈플러스%20당당치킨%20후라이드%20오븐조리%20(5).jpg)|
|:-:|:-:|
|당당치킨 오븐조리 완료|먹기 좋게 플레이팅|

오븐 조리가 완료되면 튀김이 바삭하게 살아난 당당치킨을 맛볼 수 있습니다.

<br><br>

### 오븐으로 데우기 (양념)

|![](assets/홈플러스%20당당치킨%20양념%20오븐조리%20(1).jpg)|
|:-:|
|당당치킨 양념 오븐 조리|

양념도 후라이드와 마찬가지로 **최고 온도에서 5 ~ 10분 예열**한 뒤 키친타올, 종이호일 위에 치킨을 올려 데우면 됩니다.

후라이드와 달리 양념은 잘 타기 때문에 **190도에서 6분** 동안 데워주세요.

<br><br>

### 홈플러스 PB 탄산과 같이 먹기

|![](assets/홈플러스%20탄산.png)|
|:-:|
|홈플러스 PB 탄산 음료 목록|

당당치킨은 탄산 음료와 먹으면 더욱 맛있습니다. 홈플러스 PB 제품을 저렴하게 판매중이니 할인하는 탄산 음료가 없다면 PB 상품으로 구매해보세요.

<br><br>

### 소스, 치킨무와 같이 먹기

|![](assets/홈플러스%20당당치킨%20소스,치킨무.png)|
|:-:|
|당당치킨과 함께 구매가 가능한 소스와 치킨무|

3가지 종류의 소스와 치킨무를 같이 판매하고 있으니 같이 구매하여 먹으면 좋습니다.

<br><br>

### 페리카나 양념소스와 먹기

|![](assets/페리카나%20양념소스.jpg)|
|:-:|
|롯데마트/롯데슈퍼에서 판매중인 페리카나 양념소스|

롯데마트 또는 롯데슈퍼에서 판매하는 페리카나 양념소스는 프랜차이즈의 양념 맛을 볼 수 있습니다. 당당치킨 후라이드와 같이 먹으면 맛있습니다. 용량이 커서 여러 번 사용할 수 있습니다.

<br><br>

### 파채와 먹기

|![](assets/홈플러스%20파채.png)|
|:-:|
|홈플러스에서 파는 파채|


|![](assets/홈플러스%20당당치킨%20파채.jpg)|
|:-:|
|파채와 함께 먹는 당당치킨|

파채를 좋아하는 분이라면 파채를 같이 구매하여 먹어보세요. 아니면 파를 직접 파채칼로 썰어서 먹어도 좋습니다.

<br><br>

## 직접 호스팅하기

서비스를 직접 호스팅할 수 있습니다. `docker` 사용을 권장합니다.

### 레포지토리 클론
```sh
git clone https://github.com/solo5star/dangdangrun.git
cd dangdangrun
```

### 환경변수 설정
`dangdangrun` 폴더에 `.env` 파일을 생성한 뒤, 아래와 같은 형식으로 값을 추가해주세요.
```
# server variables
REGIONS=부산,경남,대구

# bot variables
DISCORD_TOKEN=YOUR_DISCORD_TOKEN
```
> `REGIONS` 는 정보를 얻어올 지점들을 지역 단위로 지정하기 위해 사용합니다. 콤마(`,`)로 구분합니다.

> `DISCORD_TOKEN` 은 디스코드 봇을 생성하였을 때 나타나는 토큰 값을 넣으면 됩니다.

### 실행

#### `docker` 를 사용하여 실행하기 (권장)
```sh
docker-compose up -d
```

> `docker-compose ps` 명령을 사용하여 `server`와 `bot` 컨테이너가 잘 실행되었는지 확인해주세요.

> `docker-compose logs -tf` 명령을 사용하여 로그를 확인할 수 있습니다.

#### `python` 명령을 사용하여 실행하기
```sh
python entrypoint.py server
```
서버를 먼저 실행해주세요.

그리고 다른 터미널을 준비하고,
```sh
python entrypoint.py bot
```
봇을 실행하면 됩니다.

> 단순히 터미널에서 `python` 으로 실행한 경우, 터미널을 끄면 실행중인 서버 또는 봇이 꺼집니다.

<br><br>

## 빌드
```sh
docker buildx build --platform linux/amd64,linux/arm64 -t solo5star/dangdangrun --push .
```

`docker buildx` 로 빌드하여 다양한 아키텍처를 지원할 수 있습니다.

> 이미지 태그를 변경하려면 `-t solo5star/dangdangrun` 에서 원하는 값으로 변경해주세요.

> Docker Hub에 푸시되는 것을 원치 않는다면 `--push` 옵션을 빼면 됩니다.

<br><br>

## 환경변수
```
# common variables
DEBUG=True

# server variables
REGIONS=부산,경남,대구

# bot variables
SERVER_HOST=ws://localhost:3355
DISCORD_TOKEN=YOUR_DISCORD_TOKEN
DISCORD_DEBUG_SERVER_ID=YOUR_DISCORD_DEBUG_SERVER_ID
```

### `DEBUG` (server, bot)
디버깅 모드로 서버 또는 봇을 실행합니다. `True` 로 설정하면 활성화되며, 아래의 사항들이 적용됩니다.

* (server) `uvicorn` 이 디버그 모드로 실행됨
* (server) 파일 저장 시 자동으로 reload 적용
* (bot) `DISCORD_DEBUG_SERVER_ID` 로 지정한 서버에만 메세지가 전송됨


### `REGIONS` (server)
정보들을 얻어올 지점들을 지역 단위로 설정합니다. 컴마(`,`)로 구분합니다. 사용 가능한 지역은 아래의 표를 참고해주세요.

|지역|지점 목록|지점 개수|
|-|-|:-:|
|서울특별시|가양점, 강동점, 금천점, 동대문점, 면목점, 목동점, 방학점, 서울남현점, 서울상봉점, 시흥점, 신내점, 신도림점, 영등포점, 월곡점, 월드컵점, 잠실점, 중계점, 합정점|18|
|인천/경기|간석점, 경기하남점, 계산점, 고양터미널점, 김포점, 동수원점, 병점점, 부천상동점, 북수원점, 분당오리점, 서수원점, 송탄점, 시화점, 안산고잔점, 안양점, 야탑점, 영통점, 오산점, 원천점, 의정부점, 인천논현점, 인천송도점, 인천숭의점, 인천연수점, 인천청라점, 인하점, 진접점, 킨텍스점, 파주문산점, 파주운정점, 평촌점, 평택안중점, 포천송우점, 화성향남점|34|
|대전|대전가오점, 문화점, 서대전점, 유성점|4|
|충남|논산점, 보령점, 천안점|3|
|충북|동청주점, 청주점|2|
|세종|세종점, 조치원점|2|
|광주|광주계림점, 광주하남점, 동광주점|3|
|전북|김제점, 익산점, 전주완산점, 전주점, 전주효자점|5|
|전남|광양점, 목포점, 순천점|3|
|대구|내당점, 대구수성점, 동촌점, 상인점, 성서점, 칠곡점|6|
|경북|경산점, 경주점, 구미점, 문경점, 안동점, 영주점, 죽도점, 포항점|8|
|강원|강릉점, 삼척점, 원주점, 춘천점|4|
|울산|울산남구점, 울산동구점, 울산북구점, 울산점|4|
|부산|동래점, 부산반여점, 부산연산점, 부산정관점, 서면점, 서부산점, 센텀시티점, 아시아드점, 장림점, 해운대점|10|
|경남|거제점, 김해점, 마산점, 밀양점, 진주점, 진해점, 창원점|7|
|제주|서귀포점|1|

### `SERVER_HOST` (bot)
봇이 통신할 서버 주소를 지정합니다. 프로토콜은 `ws://` (websocket) 를 사용합니다.

### `DISCORD_TOKEN` (bot)
디스코드 봇을 생성한 후 발급받은 토큰 값입니다.

### `DISCORD_DEBUG_SERVER_ID` (bot)
디버깅 모드를 사용중일 때, 다른 서버에 메세지가 전송되지 않도록 `DISCORD_DEBUG_SERVER_ID` 로 지정한 서버에만 메세지가 전송되도록 할 수 있습니다.
